{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Changepassword"
    },
    "designerId": "b632c0a9-34ee-4df4-a2f5-730bba907745",
    "cn": [
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "application"
                ],
                "fn": "init",
                "implHandler": [
                    "  this.control({ \"button#submitpassword\": { click: this.onButtonClickSubmit } });\r",
                    "        this.control({ \"button#resetpassword\": { click: this.onButtonClickReset } });"
                ]
            },
            "designerId": "3b0d24fd-e57f-41f9-89a2-54ea1b6dd074"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "button",
                    "e",
                    "options"
                ],
                "fn": "onButtonClickSubmit",
                "implHandler": [
                    " var formPanel = button.up('panel'),\r",
                    "            changePassword = button.up('changepassword');\r",
                    "\r",
                    "        var oldPassword = formPanel.down('textfield[name=oldPassword]').getValue();\r",
                    "\r",
                    "        var password = formPanel.down('textfield[name=password]').getValue();\r",
                    "\r",
                    "        var confirmPassword = formPanel.down('textfield[name=confirmPassword]').getValue();\r",
                    "        //var fomr = formPanel.getForm();\r",
                    "        //alert(fomr);\r",
                    "\r",
                    "         if (formPanel.getForm().isValid()) {\r",
                    "        //  alert('called');\r",
                    "        Ext.get(changePassword.getEl()).mask(\"Processing your request... Please wait...\", 'loading');\r",
                    "\r",
                    "        Ext.Ajax.request(\r",
                    "            {\r",
                    "\r",
                    "                url: 'php/changePass.php',\r",
                    "                params:\r",
                    "                {\r",
                    "                    confirmPassword: MyApp.util.MD5.encode(confirmPassword),\r",
                    "                    password: MyApp.util.MD5.encode(password),\r",
                    "                    oldPassword: MyApp.util.MD5.encode(oldPassword)\r",
                    "                },\r",
                    "             success: function(conn, response, options, eOpts) {\r",
                    "\r",
                    "                           Ext.get(changePassword.getEl()).unmask();\r",
                    "\r",
                    "                            var result = MyApp.util.Util.decodeJSON(conn.responseText);\r",
                    "\r",
                    "                            if (result.success) {\r",
                    "\r",
                    "                                Ext.get(changePassword.getEl()).unmask();\r",
                    "\r",
                    "                                Ext.Msg.show\r",
                    "                                  ({\r",
                    "                                      title: 'Success..',\r",
                    "                                      msg: 'Your changes updated successfully!',\r",
                    "                                      icon: Ext.Msg.INFORMATION,\r",
                    "                                      buttons: Ext.Msg.OK\r",
                    "                                  });\r",
                    "\r",
                    "                                formPanel.getForm().reset();\r",
                    "                            }\r",
                    "                          else\r",
                    "                          {\r",
                    "                                  Ext.get(changePassword.getEl()).unmask();\r",
                    "\r",
                    "                              Ext.Msg.show\r",
                    "                        ({\r",
                    "                            title: 'failed..!',\r",
                    "                            msg: 'Invalid credentials found',\r",
                    "                            icon: Ext.Msg.ERROR,\r",
                    "                            buttons: Ext.Msg.OK\r",
                    "                        });\r",
                    "\r",
                    "                            }\r",
                    "                        },\r",
                    "                   failure:function(conn,response,options,eOpts)\r",
                    "                    {\r",
                    "                       Ext.get(changePassword.getEl()).unmask();\r",
                    "\r",
                    "                        Ext.Msg.show\r",
                    "                        ({\r",
                    "                            title: 'Error!',\r",
                    "                            msg: conn.responseText,\r",
                    "                            icon: Ext.Msg.ERROR,\r",
                    "                            buttons: Ext.Msg.OK\r",
                    "                        });\r",
                    "\r",
                    "\r",
                    "\r",
                    "                    }\r",
                    "                }\r",
                    "           );\r",
                    "         }"
                ]
            },
            "designerId": "0c027a42-8dea-4927-ae0a-a2f1223885c7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "button",
                    "e",
                    "options"
                ],
                "fn": "onButtonClickReset",
                "implHandler": [
                    "button.up('form').getForm().reset();"
                ]
            },
            "designerId": "4ac5669d-1426-4b12-8a80-8e431e689292"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "Index",
                "implHandler": [
                    "this.getApplication().getController('BaseSession').ValidateSession();"
                ]
            },
            "designerId": "2afc3687-e9fe-4bbd-8bae-288f4f3a3aa6"
        }
    ]
}