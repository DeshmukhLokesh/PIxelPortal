{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "BaseSession"
    },
    "designerId": "1a535911-9f23-441b-8c4e-05504f54a1a7",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "ValidateSession",
                "implHandler": [
                    "Ext.Ajax.request({\r",
                    "                url: 'php/IsSessionAlive.php',\r",
                    "                method: 'GET',\r",
                    "                success: function(conn, response, options, eOpts) {\r",
                    "\r",
                    "                    var appHeader = Ext.ComponentQuery.query('#headerPanel')[0];\r",
                    "\r",
                    "                    var tb = appHeader.down('tbfill');\r",
                    "                    var logout = appHeader.down('#logoutMenu');\r",
                    "                    var profileHeaderImage = appHeader.down('#profileHeaderImage');\r",
                    "                    var loginButton  = appHeader.down('#login');\r",
                    "                    var signupButton =  appHeader.down('#signup');\r",
                    "                    var menuPanel = Ext.ComponentQuery.query('#menuPanel')[0];\r",
                    "\r",
                    "                    var result = MyApp.util.Util.decodeJSON(conn.responseText);\r",
                    "\r",
                    "                    logout.setText(result.profileEmail);\r",
                    "\r",
                    "\r",
                    "                    if(result.success)\r",
                    "                    {\r",
                    "\r",
                    "                         profileHeaderImage.setSrc('resources/ProfileImages/'+result.profilePicture);\r",
                    "                         logout.setVisible(true);\r",
                    "                         menuPanel.setVisible(true);\r",
                    "                         profileHeaderImage.setVisible(true);\r",
                    "\r",
                    "                         loginButton.setVisible(false);\r",
                    "                         signupButton.setVisible(false);\r",
                    "\r",
                    "                        if(result.PPStatus === 'PP_SUCCESS')\r",
                    "                        {\r",
                    "\r",
                    "                              Ext.Msg.show({\r",
                    "                                title:'Transaction was done successfully',\r",
                    "                                msg: 'Your payment was done successfully. Thanks for your business!',\r",
                    "                                buttons: Ext.Msg.OK,\r",
                    "                                icon: Ext.Msg.INFO\r",
                    "                            });\r",
                    "\r",
                    "                            Ext.Ajax.request({\r",
                    "                            url: 'php/PPStatusSet.php',\r",
                    "                            method: 'GET',\r",
                    "                            success: function(conn, response, options, eOpts) {\r",
                    "\r",
                    "                            }});\r",
                    "\r",
                    "                        }\r",
                    "\r",
                    "\r",
                    "\r",
                    "                    }\r",
                    "                    else\r",
                    "                   {\r",
                    "                       profileHeaderImage.setSrc('resources/user-icon.png');\r",
                    "                         logout.setVisible(false);\r",
                    "                         menuPanel.setVisible(false);\r",
                    "                         profileHeaderImage.setVisible(false);\r",
                    "\r",
                    "                         loginButton.setVisible(true);\r",
                    "                         signupButton.setVisible(true);\r",
                    "\r",
                    "                         Ext.Router.redirect('login');\r",
                    "                   }\r",
                    "\r",
                    "\r",
                    "                }});"
                ]
            },
            "designerId": "2a968006-1623-422f-b512-09a18379177a"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "EnableGuestView",
                "implHandler": [
                    "Ext.Ajax.request({\r",
                    "                url: 'php/IsSessionAlive.php',\r",
                    "                method: 'GET',\r",
                    "                success: function(conn, response, options, eOpts) {\r",
                    "\r",
                    "                    var appHeader = Ext.ComponentQuery.query('#headerPanel')[0];\r",
                    "\r",
                    "                    var tb = appHeader.down('tbfill');\r",
                    "                    var logout = appHeader.down('#logoutMenu');\r",
                    "                    var profileHeaderImage = appHeader.down('#profileHeaderImage');\r",
                    "                    var loginButton  = appHeader.down('#login');\r",
                    "                    var signupButton =  appHeader.down('#signup');\r",
                    "                    var menuPanel = Ext.ComponentQuery.query('#menuPanel')[0];\r",
                    "\r",
                    "                    var result = MyApp.util.Util.decodeJSON(conn.responseText);\r",
                    "\r",
                    "                    menuPanel.setVisible(false);\r",
                    "\r",
                    "                    logout.setText(result.profileEmail);\r",
                    "\r",
                    "                    if(result.success)\r",
                    "                    {\r",
                    "                        profileHeaderImage.setSrc('resources/ProfileImages/'+result.profilePicture);\r",
                    "                         logout.setVisible(true);\r",
                    "                         profileHeaderImage.setVisible(true);\r",
                    "\r",
                    "                         loginButton.setVisible(false);\r",
                    "                         signupButton.setVisible(false);\r",
                    "                    }\r",
                    "                    else\r",
                    "                    {\r",
                    "                        profileHeaderImage.setSrc('resources/user-icon.png');\r",
                    "                         logout.setVisible(false);\r",
                    "                         profileHeaderImage.setVisible(false);\r",
                    "\r",
                    "                         loginButton.setVisible(true);\r",
                    "                         signupButton.setVisible(true);\r",
                    "                    }\r",
                    "\r",
                    "\r",
                    "                }});"
                ]
            },
            "designerId": "b3241084-c387-4751-ba31-c9e7361e9a62"
        }
    ]
}