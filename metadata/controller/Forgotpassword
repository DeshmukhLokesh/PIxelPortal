{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "Forgotpassword"
    },
    "designerId": "5178b8d0-dec6-4155-9a57-7c314ffa3b62",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "fn": "Index",
                "implHandler": [
                    "this.getApplication().getController('BaseSession').EnableGuestView();"
                ]
            },
            "designerId": "a534c3ba-998a-46e5-bd65-81f5acf56f68"
        },
        {
            "type": "fixedfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "application"
                ],
                "fn": "init",
                "implHandler": [
                    "this.control(\r",
                    "            {\r",
                    "             \"forgotpassword button#forgotpasssubmit\":\r",
                    "             {click:this.onButtonClickSubmit}\r",
                    "            });"
                ]
            },
            "designerId": "14a1d3a9-5cfe-4b7a-827d-75ec857971c4"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "button",
                    "options"
                ],
                "fn": "onButtonClickSubmit",
                "implHandler": [
                    "var formPanel = button.up('form'),\r",
                    "             forgotpassword = button.up('forgotpassword'),\r",
                    "             msgBox =formPanel.down('#forgotpassmsg'),\r",
                    "    forgotpasslabel =formPanel.down('#forgotpasslabel'),\r",
                    "             email = formPanel.down('textfield[name=forgotpassemail]').getValue();\r",
                    "\r",
                    "        if(formPanel.getForm().isValid())\r",
                    "        {\r",
                    "            Ext.get(forgotpassword.getEl()).mask(\"Sending Email...\", 'loading');\r",
                    "            Ext.Ajax.request(\r",
                    "                {\r",
                    "                url:'php/forgotpass.php',\r",
                    "                params:\r",
                    "                {\r",
                    "                    email:email\r",
                    "\r",
                    "                },\r",
                    "                 success: function(conn, response, options, eOpts) {\r",
                    "\r",
                    "                           Ext.get(forgotpassword.getEl()).unmask();\r",
                    "\r",
                    "                            var result = MyApp.util.Util.decodeJSON(conn.responseText);\r",
                    "\r",
                    "                            if (result.success) {\r",
                    "\r",
                    "                                formPanel.down('textfield[name=forgotpassemail]').setVisible(false);\r",
                    "                                formPanel.down('#forgotpasssubmit').setVisible(false);\r",
                    "\r",
                    "                                forgotpasslabel.setVisible(false);\r",
                    "                                msgBox.setValue(\"An e-mail has been sent to the mentioned e-mail address.<br/> The e-mail contains the instructions for resetting your password.<br/> If you don't receive this e-mail, please check your junk mail folder or contact us at TBD@pixelriver.com for further assistance.!\", false);\r",
                    "                                msgBox.show();\r",
                    "                            }\r",
                    "                          else {\r",
                    "                                msgBox.setValue(\"Incorrect Email Address\", false);\r",
                    "                                msgBox.show();\r",
                    "                             }\r",
                    "                        },\r",
                    "                   failure:function(conn,response,options,eOpts)\r",
                    "                    {\r",
                    "                       Ext.get(forgotpassword.getEl()).unmask();\r",
                    "\r",
                    "                        Ext.Msg.show\r",
                    "                        ({\r",
                    "                        title:'Error!',\r",
                    "                        msg:conn.responseText,\r",
                    "                        icon:Ext.Msg.ERROR,\r",
                    "                        buttons:Ext.Msg.OK\r",
                    "                        });\r",
                    "\r",
                    "\r",
                    "\r",
                    "                    }\r",
                    "                }\r",
                    "               );\r",
                    "        }"
                ]
            },
            "designerId": "56bb505b-7e81-4d2e-bc80-3da7eae6e3ef"
        }
    ]
}